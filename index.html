<!DOCTYPE html>
<html lang="en">



<head>
   
   
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gulf of Mexico Coupled</title>
       <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
    <!--this above "set" is the external leaflet stylesheet-->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.css"/>
   <!--this is leafletweather from mwasil-->
    <!-- Add font library to html... -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
   <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
   <!--this above "set" is the external leaflet javascript library file-->
   <script src="https://unpkg.com/esri-leaflet"></script> <!--this is ArcGISpacakge-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-providers/1.12.0/leaflet-providers.min.js"></script>
   <script src="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.js"></script>  <!--this is leafletweather from mwasil-->
    <!-- this is ArcGISpacakge-->
   
   <!-- above; i had to add this library in order to add a satelittle layer-->
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!--this is the sweetalert2 library/ for my popup to say we have moved-->




<style>





#map { height: 100vh; }

/*this above is the height of the map*/
@media (max-width: 900px) { 
   body {
      flex-direction: column;
   }
}

/*this above is the media query for the map*/




/*adding style to a search bar*/
#search-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: #0b025e;
    padding: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
        }

#search-input {
    flex-grow: 1;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-right: 10px;
}
/*adding style to the add data button*/

#add-data-button {
    background: none;
    border: none;
    cursor: pointer;
    color: #fff; /* White */
    font-size: 1.2em;
    margin-right: 0.2in;
}

/*adding style to the uf-hull button*/
#uf-hull {
    color: #fff; /* White */
    margin-right: 10px;
    font-family: sans-serif;
    font-weight: bold;
    text-decoration: none;
}


.box1 {
    background-color: red;  /* box colors for ranges of exchanges; these are boxes inside content panel*/
}
.box2 {
    background-color: yellow;  
}
.box3 {
    background-color: green;  
}

/*adding colord dots to the layer control*/

        .layer-control-dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

/*adding style to the settings button*/
        #settings-button {
    background: none;
    border: none;
    cursor: pointer;
    color: #fff; /* White */
    font-size: 1.2em;
    margin-right: 50px; /* Add some space between the "Add Data" button and the "Settings" button */
}

#info-button {
    background: none;
    border: none;
    cursor: pointer;
    color: #fff; /* White */
    font-size: 1.2em;
    margin-right: 20px;
    
}


/*adding style to the content panel*/

#content-panel {
    position: fixed;
    right: 0;
    top: 0;
    width: 250px; /* Adjust as needed */
    height: 100%;
    overflow: auto;
    background-color: #00000079; /* Adjust as needed */
    z-index: 1002; /* Add this line */
    margin-top: 47px;
}


#collapse-button {
    position: absolute;
    top: 50%;
    right: 0px;
    transform: translateY(-50%);
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    z-index: 1004; 
    /* other styles... */
}

#content-panel.closed {
    width: 20px;
    overflow: hidden;
}


.custom-base-control {
    position: absolute;
    top: 50px; /* Adjust this value as needed */
    left: 0;
}

.custom-layer-control {
    position: absolute;
    top: 110px; /* Adjust this value as needed */
    left: 0px; /* Adjust this value as needed */
}

.custom-rainviewer-control {
    position: absolute;
    top: 170px; /* Adjust this value as needed */
    left: 0px; /* Adjust this value as needed */
}


.leaflet-control-layers-base label,
.leaflet-control-layers-overlays label {
    display: flex;
    align-items: center;
    white-space: nowrap;
}

.leaflet-control-layers:hover {
    z-index: 1000;   /* Changing the location of toggles to fit below search bar */
}

/* this is the outline of text that appears in content panel */
.property-box {
    border: 1px solid #110672;   
    padding: 0px;  /* Reduced padding from 10px to 0px */
    margin: 0px 0;
    border-radius: 2px;
    background-color: #00000088;
}



#content-panel {
    font-family: Arial, sans-serif; /*  */
    font-size: 10px; /* content panel font!!!!! */  
    color: #fff;
}




/* lines 243-254 are the boxes that show up next to the words inside the contents paine */  
.property-box {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.box-container {
    display: flex;
    flex-direction: row-reverse;
}

.box {
    width: 10px;  /* Adjust to your desired width */
    height: 15px;  /* Adjust to your desired height */
    border: 1px solid #ccc;
    margin-left: 1px;
}

/*.custom-base-control::before {
    content: "";
    display: inline-block;
    width: 20px;
    height: 20px;
    background-image: url('path/to/your/icon.png');
    background-size: contain;
    background-repeat: no-repeat;
    margin-right: 5px;
}  */  /*this is the code for adding an icon to the base map control*/

.leaflet-top.leaflet-left {
        top: 60px !important;  /* moving toggle botton of map type down to visable range */
    }

    #data-display {
        font-family: Arial, sans-serif;
        font-size: 12px;
        color: #ffffff;
        padding: 1px;
        border: 1px solid #ccc;
        background-color: #000000a1;
        overflow: auto;
        height: 500px;
    }



</style>






</head>





<body>
    
    
    <div id="map" style="height: 100vh;"></div>

    <div id="content-panel" style="display: none;">
        <!-- content panel content -->
        <button id="clear-data-button">Clear Data</button>
        <div id="data-display"></div>
    </div>

    <button id="collapse-button">â–º</button>
 
 
 
 
         <!--adding a button to "add data"-->
         <div id="search-bar">
             <a id="uf-hull" href="http://www.globalhumanwildlifelab.com/">HULL LAB</a>
             <input type="text" id="search-input" placeholder="Enter Location...">
            
             <button id="add-data-button" title="Add Data">
                 <i class="fas fa-plus"></i>
             </button>
 
             <button id="info-button" title="About">
             <i class="fas fa-info-circle"></i>
             </button>
 
 
 
 
 
             <div id="settings-container" style="position: relative;">
                 <button id="settings-button" title="Settings">
                     <i class="fas fa-cog"></i> <!-- common icon for settings, can replace -->
                 </button>
             <!-- Dropdown content -->
                 <div id="dropdown" style="display: none; position: absolute; top: 150%; left: -96px;">
                     <button id="exit-button" style="position: absolute; right: -24px;">X</button>
                     <select id="settings-options">
                         <option value="option1">Option 1</option>
                         <option value="option2">Option 2</option>
                         <!-- Add more options as needed -->
                     </select>
                 </div>
         
         
         
             </div>



    <!-- Include Leaflet JavaScript library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Include Esri Leaflet JavaScript library -->
    <script src="https://unpkg.com/esri-leaflet@2.4.0/dist/esri-leaflet.js"></script>


    <script>
        // Initialize the map
        var map = L.map('map', {zoomControl: false}).setView([28.5000, -90.6000], 6.5);




        L.control.zoom({
     position: 'bottomleft'
    }).addTo(map);


        // Add OpenStreetMap as base layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // Add a marker to the map
        L.marker([29.6516, -82.3248]).addTo(map)
            .bindPopup("<b>Hello User!</b><br>I am here.. Currently here collecting data.").openPopup();


    // Define OpenStreetMap base map
    var OpenStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });

    // Define Esri WorldImagery base map
    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    });


//     // Fetch GeoJSON data and add it as a layer
// fetch('https://example.com/data.geojson')
//     .then(function(response) {
//         return response.json();
//     })
//     .then(function(data) {
//         L.geoJSON(data).addTo(map);
//     });




// Create multiple feature layers                       // Also, note that I added /0 at the end of the URL. This is to specify the layer ID, which is often required when accessing ArcGIS FeatureServer services. You may need to adjust this ID depending on the structure of your FeatureServer.


var featureLayer1 = L.esri.featureLayer({
    url: 'https://services7.arcgis.com/G5Ma95RzqJRPKsWL/ArcGIS/rest/services/Wind_Lease_Boundaries__BOEM_/FeatureServer/0',
    style: function() {
        return { color: 'hotpink', fillColor: 'gold' };
    },
    onEachFeature: function(feature, layer) {       //In this code, onEachFeature is set to a function that takes two arguments: feature and layer. feature is the GeoJSON representation of the feature, and layer is the Leaflet layer for the feature.
        layer.on('click', function() {             //Inside the function, layer.on('click', function() {...}) is used to add a click event listener to the layer. When the layer is clicked, the function is called.
            var contentPanel = document.getElementById('data-display');               
            contentPanel.innerHTML += JSON.stringify(feature.properties, null, 2);     //Inside the click event listener, document.getElementById('data-display') is used to get the 'data-display' element, and innerHTML is used to set the content of the 'data-display' to a string representation of the feature's properties.
       
             // Automatically Show the content panel after click
             var panel = document.getElementById('content-panel');  
            panel.style.display = 'block';
       
       
        });    //JSON.stringify(feature.properties, null, 2) is used to convert the feature's properties to a nicely formatted string. The second argument (null) is a replacer function that alters the behavior of the stringification process (not used in this case), and the third argument (2) specifies the number of spaces to use for indentation.
    }           //Please note that this will replace the current content of the 'data-display' each time a feature is clicked. If you want to append the data instead of replacing the current content, you can use += instead of = when setting innerHTML.
});


var featureLayer2 = L.esri.featureLayer({
    url: 'https://services7.arcgis.com/G5Ma95RzqJRPKsWL/arcgis/rest/services/Wind_Planning_Area_Boundaries__BOEM_/FeatureServer/0', //i tried changing the 0 to 1 and 2, but it did not work. see line 377
    style: function() {
        return { color: 'RoyalBlue', fillColor: 'darkblue' }; // Change the colors as needed
    },
    onEachFeature: function(feature, layer) {
        layer.on('click', function() {
            var contentPanel = document.getElementById('data-display');
            contentPanel.innerHTML += JSON.stringify(feature.properties, null, 2);

            // Automatically Show the content panel after click
            var panel = document.getElementById('content-panel');  
            panel.style.display = 'block';
       


        });
    }
});



// Add the layers to the map
featureLayer1.addTo(map);
featureLayer2.addTo(map);

// Create an overlays object
var overlays = {
    "Offshore Wind Areas (Leased)": featureLayer1,
    "Offshore Wind Areas (Planning)": featureLayer2
};



    // Add a layer switcher control
    var baseMaps = {
        "OpenStreetMap": OpenStreetMap,
        "Esri WorldImagery": Esri_WorldImagery,
    };

    L.control.layers(baseMaps, overlays, {position: 'topleft', collapsed: false}).addTo(map);  //I could possibly add a more layers here depending on the data I want to show
//note basemap, then overlay, then position




////////////////////////////////////////////event listener section


//this toggles my content panel
    document.getElementById('collapse-button').addEventListener('click', function() {
    var contentPanel = document.getElementById('content-panel');
    if (contentPanel.style.display === 'none') {
        contentPanel.style.display = 'block';
        this.textContent = 'â—„';
    } else {
        contentPanel.style.display = 'none';
        this.textContent = 'â–º';
    }
});



//popup window code, with text and formamting
document.getElementById('info-button').addEventListener('click', function() {
    var width = 600;
    var height = 360;
    var left = (screen.width - width) / 2;
    var top = (screen.height - height) / 2;
    var popupWindow = window.open("", "Popup Window", "width=" + width + ",height=" + height + ",top=" + top + ",left=" + left);
    popupWindow.document.write("<style>body { font-family: sans-serif; }</style><p>-Hello! Welcome to the Relative Mapping System. We are here to connect Earthâ€™s natural and synthetic systems through quantifiable data so that you, the user, can achieve efficient progress toward whatever your heart desires during your time here on this Rock.</p><p> <strong>-If a tree falls in a forest and no one is around to hear it, does it make a sound?</strong> Of course, it does. An abundance of nutrients begin their journey into the surrounding soils as the tree begins to decompose. Eventually, some of these microelements are cycled throughout the environment to distant places through several biogeochemical processes which may lead to some kind of personal contact event, albeit a very low-level interaction. Think of the Butterly effect; A flap of a wing may create distant spillover effects.</p><p>-With an ecological theoretic backbone, and with ideas to encourage best management practices for agencies, companies, and individual people, our project is truly an interdisciplinary one.</p><p><strong>-Have fun with it! Now go explore the world through a new dimension.<strong></p>");
});

//settings and dropdown button code
document.getElementById('settings-button').addEventListener('click', function() {
    var dropdown = document.getElementById('dropdown');
    if (dropdown.style.display === 'none') { // dropdown info
        dropdown.style.display = 'block';
    } else {
        dropdown.style.display = 'none';
    }
});
//exit button code   
document.getElementById('exit-button').addEventListener('click', function() {
    document.getElementById('dropdown').style.display = 'none';  // Hide the dropdown button
});


//clear data button code
// document.getElementById('clear-data-button').addEventListener('click', function() {
//     document.getElementById('data-display').innerHTML = '';


// });


document.getElementById('clear-data-button').addEventListener('click', function() {
    var dataDisplay = document.getElementById('data-display');
    dataDisplay.innerHTML = '';
    dataDisplay.style.display = 'new data';
});


/////////////////////////////////////////////////////////////////////






















 window.onload = function() {
    Swal.fire({
        title: 'WELCOME TO A COUPLED PLANET!',
        text: 'We believe everything to be connected, from the smallest atoms to the largest systems. With help from you, The Community, we will lean into this endeavor together. Our goal is simple: To understand the hyper-connected world.',
        confirmButtonText: 'Close'
    });
    // Other code...
}



</script>


</body>
</html>